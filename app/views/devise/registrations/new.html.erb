<div class="p-2 p-lg-5" >
  <%= link_to '<i class="bi bi-arrow-return-left"></i> Back'.html_safe, :back, class: "btn btn-info mb-3" %>
  <div class="register h-100 d-flex flex-column align-items-center justify-content-center p-4 max-extended-form-width m-auto rounded-3" >
    <h2 class="fw-bolder">Sign up as a Laywer</h2>
    <p>Or <%= link_to "Sign in to your existing account", new_session_path(resource_name), class: 'text-success text-decoration-none'%></p>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <div class="row">
        <div class="col-md field">
          <%= f.label :full_name, class: 'form-label text-muted' %><br />
          <%= f.text_field :name, placeholder: 'Your full name', class: 'form-control mb-3' %>
        </div>

        <div class="col-md field">
          <%= f.label :email, class: 'form-label text-muted' %><br />
          <%= f.email_field :email, autocomplete: "email", placeholder: 'example@gmail.com', required: true, class: 'form-control mb-3' %>
        </div>
      </div>

      <div class="row">
        <div class="col-md field">
          <%= f.label :qualification, class: 'form-label text-muted' %><br />
          <%= f.text_field :qualification, placeholder: 'LLM', required: true, class: 'form-control mb-3' %>
        </div>

        <div class="col-md field">
          <%= f.label :experience, class: 'form-label text-muted' %><br />
          <%= f.text_field :experience, placeholder: '5 Years', required: true, class: 'form-control mb-3' %>
        </div>
      </div>

      <div class="row">
        <div class="col-md field">
          <%= f.label :province, class: 'form-label text-muted' %><br />
          <%= f.select :province, User::PROVINCES, {}, class: "form-select" %>
        </div>

        <div class="col-md field">
          <%= f.label :district, class: 'form-label text-muted' %><br />
          <%= f.text_field :district, placeholder: 'Lahore', required: true, class: 'form-control mb-3' %>
        </div>
      </div>

      <div class="row">
        <div class="col-md field">
          <%= f.label :tehsil_bar, class: 'form-label text-muted' %>
          <%= f.text_field :tehsil_bar,class: "form-control mb-3", required: true, placeholder: "Tehsil Bar" %>
        </div>

        <div class="col-md field">
          <%= f.label :profile_picture, class: 'form-label text-muted' %><br />
          <%= f.file_field :avatar, class: 'form-control mb-3', accept:'image/*' %>
        </div>
      </div>

      <div class="row">
        <div class="col-md field">
          <%= f.label :id_card_picture, class: 'form-label text-muted' %><br />
          <%= f.file_field :id_card, class: 'form-control mb-3', required: true, accept:'image/*' %>
        </div>

        <div class="col-md field">
          <%= f.label :bar_concil_card_picture, class: 'form-label text-muted' %><br />
          <%= f.file_field :bar_concil_card, class: 'form-control mb-3', required: true, accept:'image/*' %>
        </div>
      </div>

      <div class="field">
        <%= f.label :description, class: 'form-label text-muted' %>
        <%= f.text_area(:description, rows: '3', class: "form-control mb-3", required: true, placeholder: "Tell us about yourself") %>
      </div>

      <div data-controller="services" data-service-options="<%= Service.all.pluck(:name, :id).to_json %>" 
           data-service-index="0" data_proficiency_levels="<%= UserService::LEVELS.keys.to_json %>" class="border p-3 rounded-3" >
        <h5 class="text-center">Add your services</h5>
        <%= f.fields_for(:user_services, resource.user_services.build) do |service| %>
          <div class="row">
            <div class="col-md field">
              <%= service.label :service, class: 'form-label text-muted' %><br />
              <%= service.select :service_id, Service.all.pluck(:name, :id), {}, class: "form-select" %>
            </div>
            <div class="col-md field">
              <%= service.label :service_proficiency, class: 'form-label text-muted' %><br />
              <div class="d-flex">
                <%= service.select :service_proficiency, UserService::LEVELS.keys, {}, class: 'form-select' %>
              </div>
            </div>
          </div>
        <% end %>
        <div class="text-end">
          <a  data-action="services#add_service" class = "btn btn-outline-success mt-3" ><i class="bi bi-plus-lg"></i> Add more</a>
        </div>
      </div>

      <div class="row">
        <div class="col-md field">
          <%= f.label :password, class: 'form-label text-muted' %>
          <% if @minimum_password_length %>
          <em class="text-muted">(<%= @minimum_password_length %> characters minimum)</em>
          <% end %><br />
          <%= f.password_field :password, autocomplete: "new-password", required: true, placeholder: 'aD34g', class: 'form-control mb-3' %>
        </div>

        <div class="col-md field">
          <%= f.label :password_confirmation, class: 'form-label text-muted' %><br />
          <%= f.password_field :password_confirmation, autocomplete: "new-password", required: true, placeholder: 'aD34g', class: 'form-control mb-3' %>
        </div>
      </div>

      <div class="actions my-2 text-center">
        <%= f.submit "Sign up", class: 'btn btn-success w-100' %>
      </div>
    <% end %>
    <%= link_to "Didn't receive confirmation instructions?", new_confirmation_path(resource_name), class: "link-secondary" %>
  </div>
</div>
